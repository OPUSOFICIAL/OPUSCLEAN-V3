# ğŸ“¦ Dump Completo do Sistema Acelera Facilities

## ğŸ“Š InformaÃ§Ãµes do Backup

**Data do Dump:** 19 de Novembro de 2025, 22:37:31 UTC  
**Nome do Arquivo:** `acelera_facilities_full_dump_2025-11-19_223731.sql.gz`  
**LocalizaÃ§Ã£o:** `/home/runner/workspace/acelera_facilities_full_dump_2025-11-19_223731.sql.gz`  
**MD5 Checksum:** `29ad5934c4fe20f921df2bf87dc4364c`

### ğŸ“ Tamanho do Arquivo
- **Comprimido (gzip):** 17 KB
- **Descomprimido:** 140.88 KB
- **Linhas totais:** 3.614 linhas

---

## ğŸ—„ï¸ ConteÃºdo do Dump

### Estrutura do Banco
- **Total de Tabelas:** 40 tabelas
- **Tabelas com Dados:** 38 tabelas
- **Formato:** SQL Plain Text (comprimido com gzip)
- **OpÃ§Ãµes:** Inclui DROP statements, CREATE DATABASE, IF EXISTS

### ğŸ“‹ Lista Completa de Tabelas

1. ai_integrations
2. audit_logs
3. bathroom_counter_logs
4. bathroom_counters
5. chat_conversations
6. chat_messages
7. checklist_templates
8. cleaning_activities
9. companies
10. company_counters
11. custom_roles
12. customer_counters
13. customers
14. dashboard_goals
15. equipment
16. equipment_types
17. maintenance_activities
18. maintenance_checklist_executions
19. maintenance_checklist_templates
20. maintenance_plan_equipments
21. maintenance_plans
22. public_request_logs
23. qr_code_points
24. role_permissions
25. service_categories
26. service_types
27. service_zones
28. services
29. site_shifts
30. sites
31. sla_configs
32. user_allowed_customers
33. user_role_assignments
34. user_site_assignments
35. users
36. webhook_configs
37. work_order_attachments
38. work_order_comments
39. work_orders
40. zones

---

## ğŸ“„ Estado Atual do Banco (PÃ³s-Limpeza)

### âœ… Dados Mantidos

**FunÃ§Ãµes (4 roles):**
1. ğŸ” **Administrador Geral** - FunÃ§Ã£o de sistema OPUS
2. ğŸ” **Cliente** - FunÃ§Ã£o de sistema
3. ğŸ‘¤ **Administrador** - FunÃ§Ã£o padrÃ£o do cliente
4. ğŸ‘¤ **Operador** - FunÃ§Ã£o padrÃ£o do cliente

**UsuÃ¡rio (1):**
- ğŸ‘¨â€ğŸ’¼ **Administrador Sistema** (admin@opus.com)

### ğŸ—‘ï¸ Dados Removidos

- âœ… 6 Customers (todos deletados)
- âœ… Todos os Sites e Zones
- âœ… Todas as Work Orders
- âœ… Todos os Equipment
- âœ… Todos os Services
- âœ… Todos os UsuÃ¡rios (exceto admin)
- âœ… Todas as Conversas de Chat
- âœ… Todos os dados transacionais

---

## ğŸ”„ Como Restaurar o Dump

### OpÃ§Ã£o 1: Restaurar em Nova Database

```bash
# Descomprimir e restaurar
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | psql -h HOST -U USER -d NEW_DATABASE
```

### OpÃ§Ã£o 2: Restaurar em Database Existente (CUIDADO!)

```bash
# Descomprimir
gunzip acelera_facilities_full_dump_2025-11-19_223731.sql.gz

# Restaurar (VAI DROPAR E RECRIAR TUDO!)
psql -h HOST -U USER -d DATABASE -f acelera_facilities_full_dump_2025-11-19_223731.sql
```

### OpÃ§Ã£o 3: Restaurar com VariÃ¡veis de Ambiente

```bash
# Usando as variÃ¡veis jÃ¡ configuradas
export PGHOST="ep-wandering-sea-af6ogwnz.c-2.us-west-2.aws.neon.tech"
export PGPORT="5432"
export PGUSER="neondb_owner"
export PGPASSWORD="npg_uSV7MIaTXwc6"
export PGDATABASE="neondb"

# Restaurar
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | psql
```

---

## âš ï¸ Avisos Importantes

1. **BACKUP COMPLETO:** Este dump contÃ©m TODO o schema e dados do banco
2. **DROP STATEMENTS:** O dump inclui comandos DROP, ele VAI APAGAR dados existentes antes de restaurar
3. **IF EXISTS:** Usa IF EXISTS para evitar erros se as tabelas nÃ£o existirem
4. **SENHA NO ARQUIVO:** O dump NÃƒO contÃ©m senhas de usuÃ¡rios PostgreSQL (apenas hash de senhas de aplicaÃ§Ã£o)
5. **VERIFICAÃ‡ÃƒO:** Use o MD5 checksum para verificar integridade apÃ³s transferÃªncia

---

## ğŸ” Verificar Integridade do Arquivo

```bash
# Verificar MD5
md5sum acelera_facilities_full_dump_2025-11-19_223731.sql.gz
# Resultado esperado: 29ad5934c4fe20f921df2bf87dc4364c

# Testar se o gzip estÃ¡ Ã­ntegro
gunzip -t acelera_facilities_full_dump_2025-11-19_223731.sql.gz

# Ver preview do conteÃºdo
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | head -100
```

---

## ğŸ“Š EstatÃ­sticas do Dump

```bash
# Contar linhas
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | wc -l

# Contar tabelas
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | grep -c "^CREATE TABLE"

# Listar tabelas com dados
gunzip -c acelera_facilities_full_dump_2025-11-19_223731.sql.gz | grep "^COPY.*FROM stdin"
```

---

## ğŸ¯ Casos de Uso

### Restaurar Sistema Limpo
Ideal para comeÃ§ar com um sistema limpo com apenas as funÃ§Ãµes essenciais e o usuÃ¡rio admin.

### MigraÃ§Ã£o de Ambiente
Perfeito para migrar o schema completo para outro ambiente (desenvolvimento, staging, etc).

### Backup de SeguranÃ§a
Serve como ponto de restauraÃ§Ã£o apÃ³s a limpeza completa do banco.

### ReplicaÃ§Ã£o de Estrutura
Ãštil para criar uma cÃ³pia idÃªntica da estrutura do banco em outro servidor.

---

## ğŸ” SeguranÃ§a

- âœ… O dump foi criado com as credenciais do Neon PostgreSQL
- âœ… ContÃ©m apenas dados de aplicaÃ§Ã£o (nÃ£o credenciais de DB)
- âœ… Senhas de usuÃ¡rios estÃ£o em hash bcrypt
- âš ï¸ NÃƒO compartilhe este arquivo publicamente
- âš ï¸ Armazene em local seguro

---

## ğŸ“ Notas Adicionais

- Database: `neondb`
- Host: `ep-wandering-sea-af6ogwnz.c-2.us-west-2.aws.neon.tech`
- Encoding: UTF8
- PostgreSQL Version: Compatible com pg_dump/psql

---

**Gerado por:** Acelera IT - OPUS Facilities Management System  
**Timestamp:** 2025-11-19 22:37:31 UTC
